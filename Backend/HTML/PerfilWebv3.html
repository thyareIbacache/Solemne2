<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Perfil - Facultad de Psicología</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet"/>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }
        .nav-link {
            transition: background-color 0.3s, color 0.3s;
        }
        .nav-link:hover {
            background-color: #9b59b6;
            color: white;
            border-radius: 0.375rem;
            padding: 0.25rem 0.5rem;
        }
        .file-preview {
            height: 6rem;  /* Adjust as needed */
            width: 6rem;   /* Adjust as needed */
            object-fit: cover;
            border-radius: 0.375rem;
        }
        .footer{
            background-color: black;
            height: 100px;
        }
        .logo-footer{
            float: left;
            max-height: 80px;
            margin-top: 10px;
            margin-left: 40px;
            margin-bottom: auto;
        }
        .text-footer{
            float: right;
            margin-top: 10px;
            margin-right: 40px;
            max-height: 80px;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
</head>
<body class="bg-white">
    <div class="max-w-7xl mx-auto">
        <header class="flex justify-between items-center py-4">
            <div class="flex items-center">
                <img alt="Header image with UDP Facultad de Psicología logo" class="mr-2" height="50" src="https://admision.udp.cl/cms/wp-content/uploads/2022/09/facultad-psicologia-logo@2x.png" width="200"/>
            </div>
            <nav class="flex space-x-4">
                <a class="nav-link text-gray-500 hover:text-white" href="perfil">Perfil</a>
                <a class="nav-link text-gray-500 hover:text-white" href="#">Biblioteca</a>
                <a class="nav-link text-gray-500 hover:text-white" href="#">Anuncios</a>
                <a class="nav-link text-gray-500 hover:text-white" href="cargar">Cargar</a>
                <a class="nav-link text-gray-500 hover:text-white" href="logout">Cerrar sesión</a>
            </nav>
        </header>
        <div class="bg-white p-6 rounded-lg">
            <div class="flex items-center space-x-6">
                <img alt="Profile picture" class="rounded-full" height="100" src="https://www.pngall.com/wp-content/uploads/5/Profile-PNG-File.png" width="100"/>
                <div>
                    <p class="text-lg font-bold">Nombre completo</p>
                    <p>{{ usuario.nombre_completo }}</p>
                    <p class="text-lg font-bold mt-2">Nombre de usuario</p>
                    <p>{{ usuario.nombre_usuario }}</p>
                    <p class="text-lg font-bold mt-2">Biografía</p>
                    <p>{{ usuario.biografia }}</p>
                    <div class="flex space-x-8 mt-4">
                        <div>
                            <p class="text-lg font-bold">Año de ingreso</p>
                            <p>{{ usuario.año_ingreso }}</p>
                        </div>
                        <div>
                            <p class="text-lg font-bold">Año en curso</p>
                            <p>{{ usuario.año_en_curso }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <section class="mt-8">
            <h2 class="text-2xl font-bold">Cursos</h2>
            <div class="grid grid-cols-3 md:grid-cols-6 gap-4 mt-4">
                <!-- Conditionally render these blocks based on user data -->
                <div class="flex flex-col items-center">
                    <a href="path/to/psicologia_infancia.pdf" target="_blank">
                        <div class="bg-gray-400 h-24 w-24"></div>
                    </a>
                    <p class="text-center mt-2">Psicología de la Infancia<br/>2024 - 1</p>
                </div>
                <div class="flex flex-col items-center">
                    <a href="path/to/psicologia_adole.pdf" target="_blank">
                        <div class="bg-gray-500 h-24 w-24"></div>
                    </a>
                    <p class="text-center mt-2">Psicología de la Adole<br/>2024 - 1</p>
                </div>
                <div class="flex flex-col items-center">
                    <a href="path/to/psicologia_comu.pdf" target="_blank">
                        <div class="bg-yellow-200 h-24 w-24"></div>
                    </a>
                    <p class="text-center mt-2">Psicología de la Comu<br/>2024 - 1</p>
                </div>
                <div class="flex flex-col items-center">
                    <a href="path/to/psicologia_social_ii.pdf" target="_blank">
                        <div class="bg-blue-200 h-24 w-24"></div>
                    </a>
                    <p class="text-center mt-2">Psicología Social II<br/>2024 - 1</p>
                </div>
                <div class="flex flex-col items-center">
                    <a href="path/to/investigacion_i.pdf" target="_blank">
                        <div class="bg-gray-600 h-24 w-24"></div>
                    </a>
                    <p class="text-center mt-2">Investigación I<br/>2024 - 1</p>
                </div>
            </div>
        </section>
        <section class="mt-8">
            <h2 class="text-2xl font-bold">Archivos compartidos</h2>
            <div class="grid grid-cols-3 md:grid-cols-6 gap-4 mt-4">
                {% for archivo in archivos %}
                <div class="flex flex-col items-center">
                    <a href="{{ archivo.ruta_archivo }}" target="_blank" download>
                        {% if archivo.tipo in ['jpg', 'jpeg', 'png', 'gif'] %}
                            <img src="{{ archivo.ruta_archivo }}" alt="{{ archivo.nombre_archivo }}" class="file-preview"/>
                        {% elif archivo.tipo == 'pdf' %}
                            <canvas id="pdf-canvas-{{ archivo.id }}" class="file-preview"></canvas>
                            <script>
                                document.addEventListener('DOMContentLoaded', function() {
                                    const url = "{{ archivo.ruta_archivo }}";
                                    const canvas = document.getElementById('pdf-canvas-{{ archivo.id }}');
                                    const context = canvas.getContext('2d');

                                    pdfjsLib.getDocument(url).promise.then((pdf) => {
                                        pdf.getPage(1).then((page) => {
                                            const viewport = page.getViewport({ scale: 1.0 });
                                            canvas.height = viewport.height;
                                            canvas.width = viewport.width;

                                            const renderContext = {
                                                canvasContext: context,
                                                viewport: viewport
                                            };
                                            page.render(renderContext);
                                        });
                                    });
                                });
                            </script>
                        {% else %}
                            <div class="flex items-center justify-center file-preview">
                                <i class="fas fa-file-alt text-3xl text-gray-600"></i>
                            </div>
                        {% endif %}
                    </a>
                    <p class="text-center mt-2">{{ archivo.nombre_archivo }}<br/>{{ archivo.asignatura }}</p>
                </div>
                {% endfor %}
            </div>
        </section>
        
    </div>
    <footer class="mt-8 footer">
        <div class="max-w-8xl mx-auto">
            <!--<img alt="Footer image with udp logo and accreditation information" class="w-full" src="../static/images/pie.png"/>-->
            <img class="logo-footer" src="../static/images/udp-logo.png">
            <img class="text-footer" src="../static/images/udp-footer.png">
        </div>
    </footer>
</body>
</html>
